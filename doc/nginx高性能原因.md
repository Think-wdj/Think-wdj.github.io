# nginxg高性能原因

## 同步和异步之间的区别

**同步与异步的重点在消息通知的方式上，也就是调用结果通知的方式. **
同步：当一个同步调用发出去后，调用者要一直等待调用结果的通知后，才能进行后续的执行。 
异步：当一个异步调用发出去后，调用者不能立即得到调用结果的返回。 
异步调用，要想获得结果，一般有两种方式： 

1. 主动轮询异步调用的结果; 
2. 被调用方通过callback来通知调用方调用结果

------



## 阻塞和非阻塞之间的区别

阻塞与非阻塞的重点在于进/线程等待消息时候的行为，也就是在等待消息的时候，当前进/线程是挂起状态，还是非挂起状态。 
- 阻塞阻塞调用在发出去后，在消息返回之前，当前进/线程会被挂起，直到有消息返回，当前进/线程才会被激活 
- 非阻塞非阻塞调用在发出去后，不会阻塞当前进/线程，而会立即返回。



大部分程序的I/O模型都是**同步阻塞**的，单个进程每次只在一个文件描述符上执行I/O操作，每次I/O系统调用都会阻塞，直到完成数据传输。 

传统的服务器采用的就是同步阻塞的多进程模型。一个server采用一个进程负责一个request的方式，一个进程负责一个request，直到会话结束。进程数就是并发数，而操作系统支持的进程数是有限的，且进程数越多，调度的开销也越大，因此无法面对高并发。

## nginx采用了异步非阻塞的方式工作。

配置方式：

```config
events {
    worker_connections  1024;
    use kqueue;  # 在Linux中配置：use epoll;
}
```



